<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="User">

<!-- 아이디 중복 체크 -->
	<select id="checkId" parameterType="string" resultType="_int">
		select count(user_id) from tbl_user where user_id = #{userId}
	</select>
	
	<!-- 가입 -->
	<insert id="join" parameterType="userVO">
		insert into tbl_user
		(user_id, user_password, user_name) 
		values(#{userId}, #{userPassword}, #{userName})
	</insert>
	
	<!-- 로그인 -->
	<select id="login" parameterType="userVO" resultType="_int">
		select user_number
		from tbl_user
		where user_id=#{userId} and user_password=#{userPassword}
	</select>
	
	<!-- 비밀번호 변경 -->
	<update id="update" parameterType="userVO">
		update tbl_user
		set user_password=#{userPassword}
		WHERE user_id=#{userId};
	</update>
	
		<!-- 내 게시글 목록  -->
	<select id="selectMyPost" parameterType="map" resultType="postVO">
		select post_number, post_writer_number, post_contents, post_time, post_like_number
		from tbl_post
		where post_writer_number = #{userNumber}
		order by post_number desc limit #{startRow}, #{rowCount}
	</select>
	
	<!--내 게시글 수 -->
	<select id="countMyPost" parameterType="_int" resultType="_int">
		select count(post_number)
		from tbl_post
		where post_writer_number = #{userNumber}
	</select>
	
</mapper>